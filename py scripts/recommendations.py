#%%
' === DÃ©pendances === '
import matplotlib.pyplot as plt
#from kneed import KneeLocator
from sklearn.datasets import make_blobs
from sklearn.cluster import KMeans
from sklearn.metrics import silhouette_score
from sklearn.preprocessing import StandardScaler
import gensim
import numpy as np

#%%
Ltags="4-koma   Action   Adventure   BL   Comedy   Drama   Ecchi   Fantasy   GL   Harem   Horror   Josei   Light Novels   Magical Girl   Manhua   Manhwa   Mecha   Mystery   OEL   One Shot   Reverse Harem   Romance   Sci Fi   Seinen   Shoujo   Shoujo-ai   Shounen   Shounen-ai   Slice of Life   Sports   Web Novels   Webtoons   Yaoi   Yuri   15th Century   16th Century   17th Century   18th Century   19th Century   1P Comic   Abstract   Acting   Adapted to Anime   Adult Couples   Adult Industry   Africa   Afterlife   Age Gap   Age Transformation   Aging   Agriculture   Alcohol   Alcoholism   Alice in Wonderland   Aliens   All-Boys School   All-Girls School   America   Amnesia   Amusement Park   Ancient China   Androids   Androphobia   Angels   Animal Abuse   Animal Characteristics   Animal Protagonists   Animal Transformation   Anime Industry   Anthologies   Anthropomorphic   Apartment Life   Apocalypse   Apprenticeship   Archery   Argentina   Arranged Marriage   Art   Art School   Assassins   Astronauts   Astronomy   Australia   Autobiographies   Aviation   Badminton   Baking   Ballet Dancing   Bar   Bara   Baseball   Based on a Card Game   Based on a Cartoon   Based on a Comic Book   Based on a Doujinshi   Based on a Fairy Tale   Based on a Light Novel   Based on a Manga   Based on a Mobile Game   Based on a Movie   Based on an Anime   Based on an Eroge   Based on an Otome Game   Based on a Novel   Based on a Picture Book   Based on a Play   Based on a Religious Text   Based on a Song   Based on a TV Series   Based on a Video Game   Based on a Visual Novel   Based on a Web Novel   Basketball   Battle Royale   BDSM   Bears   Beer   Betrayal   Billiards   Biographies   Birds   Blackmail   Board Games   Boarding House   Boarding School   Bodyguards   Body Sharing   Body Swapping   Bookstore   Borderline H   Boss-Employee Relationship   Bounty Hunters   Bowling   Boxing   Brazil   Breaking the Fourth Wall   Brother Complex   Buddhism   Bullying   Butlers   Cafe   Canada   Cancelled   Cannibalism   Card Battles   Cars   Cats   Centaurs   CEOs   Cheats   Cheerleaders   Chibi   Childcare   Child Custody   Childhood Friends   Childhood Promise   Christianity   Christmas   Circus   Classical Music   Codependency   Coffee   Cohabitation   Collections   College   Combining Mecha   Comic Essays   Coming of Age   Conspiracy   Contemporary Fantasy   Convenience Store   Cooking   Countryside   Coworkers   Crime   Criminals   Crossdressing   Crossover   Crude   Culinary School   Cultivation   Curling   Curse   Cyberpunk   Cyborgs   Cycling   Dancing   Dark Comedy   Dark Fantasy   Deal with the Devil   Death of a Loved One   Debt   Delinquents   Demon King   Demons   Desert   Detectives   Dinosaurs   Disability   Disney   Divorce   DJs   Doctors   Dodgeball   Dogs   Domestic Abuse   Doujinshi   Doujinshi Industry   Dragon Quest   Dragons   Dream World   Drug Use   Dungeon   Dysfunctional Families   Dystopia   Earthquake   Economics   Editors   Educational   Egypt   Egyptian Mythology   Elemental Powers   Elves   Emotional Abuse   England   Environmental   Episodic   Espionage   Europe   Exorcists   Explicit Sex   Explicit Violence   Fake Romance   Family Friendly   Family Life   Fashion   Fated Lovers   Fencing   Fetish   Feudal Japan   Film Comic   Finland   Firefighters   Fishing   Food and Beverage   Food Protagonists   Football   Forest   Framed for a Crime   France   French Revolution   Frogs   Fudanshi   Fujoshi   Full Color   Gag   Gambling   Gangs   Gekiga   Gender Bender   Genies   Germany   Ghost Hunters   Ghosts   God-Human Relationship   Gods   Golf   Greece   Greek Mythology   Guilds   Guns   Guro   Gyaru   Gymnastics   Gynophobia   Hacking   Hamsters   Hand to Hand Combat   Harlequin   Heaven   Hell   Henshin Heroes   Hiatus   High Stakes Games   Historical   Hockey   Horse Racing   Hostesses   Hosts   Hotels and Inns   Human Experimentation   Ice Skating   Idols   Illness   Impersonation   Incest   Incubus   India   Indonesian Comics   Infidelity   Inheritance   Insects   Interspecies Relationship   Isekai   Island   Isolated Society   Italy   Iyashikei   Japanese Mythology   Jazz Music   Journalism   Journey to the West   Jungle   Kaijuu   Kendo   Kickboxing   Kidnapping   Kingdom Building   Koalas   Lacrosse   Landlords   Lawyers   Leijiverse   LGBT Themes   Library   Lifestyle Change   Loneliness   Love Confession   Love Triangle   Mafia   Magic   Magic School   Mahjong   Maids   Management   Manga Industry   Mansion   Marriage of Convenience   Married Life   Martial Arts   Martial Arts School   Marvel Comics   Master-Servant Relationship   Mature Romance   Mature Themes   Medical   Medieval   Melancholy   Mental Illness   Mercenaries   Mermaids   Metal Heroes   Middle Eastern   Military   Military School   Mind Games   MMA   MMORPG   Modelling   Modern Knowledge   Monster Girls   Monsters   Monster School   Motorcycles   Mountain Climbing   Muay Thai   Music   Music School   Mysterious Benefactor   Mysterious Shop   Natural Disaster   NEET   Neighbors   Newly Co-ed School   New Zealand   Ninja   Nobility   No Dialogue   Noir   Non-Human Protagonists   Norse Mythology   Novel Industry   Novels   Nudity   Nurses   Obsessive Love   Ocean   OFL   OGL   Omegaverse   One-Night Stand   Opposites Attract   Orphans   OSL   Otaku Culture   Otome Game   Outer Space   Outside World   Overpowered Main Characters   Pandas   Pandemic   Panty Shots   Parody   Past Memories   Penguins   Person in a Strange World   Pets   Photography   Physical Abuse   Pigs   Pill Concocting   Pilot Chapter   Ping Pong   Pirates   Playboys   Play or Die   Police   Political   Polyamory   Possessive Lovers   Post-apocalyptic   Poverty   Power Suits   Pregnancy   Prehistoric   Prison   Prophecy   Prostitution   Proxy Battles   Psychic Powers   Psychological   Psychopaths   PVE   PVP   Rabbits   Racing   Rakugo   Ranchers   Real Robot   Rebellions   Recipes   Reincarnation   Religion   Remarriage   Restaurants   Revenge   Reverse Isekai   Rivalries   Robots   Rock Climbing   Rock Music   Romance of the Three Kingdoms   Romantic Comedy   Roommates   Royalty   RPG   Rugby   Running   Russia   Sake   Salaryman   Samurai   Sanrio Characters   San-X Characters   Satire   School Club   School Life   Scotland   Scuba Diving   Second Chance   Secret Child   Secret Identity   Self-Harm   Senpai-Kouhai Relationship   Sentai   Sentient Mecha   Serial Killers   Sexual Abuse   Sexual Content   Sheikhs   Sherlock Holmes   Shinigami   Ship   Showbiz   Siblings   Single Parent   Sister Complex   Skateboarding   Skeletons   Skiing   Slapstick   Slimes   Slow Life   Smut   Soccer   Social Gap   Social Media   Space Opera   Space Pirates   Spain   Split Personality   Stalkers   Star-Crossed Lovers   Steampunk   Stockholm Syndrome   Student Council   Student-Teacher Relationship   Submarine   Succubus   Sudden Girlfriend Appearance   Suicide   Summoned Into Another World   Sumo Wrestling   Superheroes   Supernatural   Superpowers   Super Robot   Surfing   Survival   Swimming   Switzerland   Swordplay   System Administrator   Teaching   Tennis   Terrorism   Thai Comics   The Great Outdoors   Thieves   Thriller   Time Travel   Tokusatsu   Tournaments   Track and Field   Trains   Transfer Students   Transforming Mecha   Transported Into a Novel   Trapped in a Video Game   Treasure Hunters   Tsundere   Tutors   Unicorns   Unrequited Love   Urban Fantasy   Urban Legend   Valentine's Day   Vampires   Veterinarians   Video Game Industry   Vigilantes   Villainess   Violence   Virtual Reality   Vocaloid   Voice Acting   Volleyball   Voyeurism   VTubers   War   Water Polo   Weak to Strong   Werewolves   Western   Wine   Witches   Work Life   World Hopping   World War 2   Wrestling   Writers   Wuxia   Xianxia   Yakuza   Yaoi Hand Syndrome   Youkai   Zombies   Zoo "
Ltags=Ltags.split('   ')

kmeans = KMeans(init="random",n_clusters=10,n_init=10,max_iter=300,random_state=42)

#%%
from sklearn.decomposition import TruncatedSVD
from sklearn.preprocessing import OneHotEncoder
enc = OneHotEncoder(handle_unknown='ignore')

# > Encoder 
enctags=np.array([[el,i] for i,el in enumerate(Ltags)])
enc.fit(enctags)
X=enc.transform(enctags)
#x=enc.transform([['Action',2]]).toarray()==enc.transform([['Action',1]]).toarray()

# > ACP 
svd = TruncatedSVD(random_state=42)
coord=svd.fit_transform(X)
#%%
donx=[coordo[0] for coordo in coord]
dony=[coordo[1] for coordo in coord]

plt.plot(list(donx),list(dony),linestyle='none', marker='o',c='Red')
plt.xlim(-0.25,0.25)
plt.ylim(-0.25,0.25)
plt.show()

